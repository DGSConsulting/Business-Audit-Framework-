<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DGS Consulting | Business Scorecard</title>
<style>
  :root {
    --primary: #1E293B;
    --accent: #06B6D4;
    --light: #F9FAFB;
    --lighter: #FFFFFF;
    --success: #10B981;
    --warning: #FBBF24;
    --danger: #F87171;
  }

  * {margin:0; padding:0; box-sizing:border-box;}
  body {font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: var(--primary); min-height:100vh; padding:2rem 1rem;}
  .container {max-width: 1000px; margin:0 auto; background: var(--lighter); border-radius:16px; box-shadow:0 20px 60px rgba(0,0,0,0.3); overflow:hidden;}
  .header {background: linear-gradient(135deg, var(--primary) 0%, #334155 100%); color:white; padding:2.5rem 2rem; text-align:center;}
  .header h1 {font-size:2.5rem; margin-bottom:0.5rem; font-weight:700;}
  .header p {font-size:1.1rem; opacity:0.9;}
  .progress-indicator {position:sticky; top:0; background:white; padding:1rem 2rem; box-shadow:0 2px 8px rgba(0,0,0,0.1); z-index:100; display:flex; justify-content:space-between; align-items:center;}
  .progress-text {font-size:0.9rem; color: var(--primary); font-weight:600;}
  .quick-actions {display:flex; gap:0.5rem;}
  .quick-btn {padding:0.5rem 1rem; background: var(--light); border:none; border-radius:6px; font-size:0.85rem; cursor:pointer; transition:all 0.2s ease; font-weight:600; color: var(--primary);}
  .quick-btn:hover {background: var(--accent); color:white;}
  .content {padding:2.5rem;}
  .section {margin-bottom:3rem;}
  .section-title {font-size:1.5rem; font-weight:700; margin-bottom:1.5rem; color:var(--primary); display:flex; align-items:center; gap:0.5rem;}
  .categories {display:grid; gap:2rem;}
  .category-card {background: var(--light); padding:1.5rem; border-radius:12px; border:2px solid transparent; transition:all 0.3s ease; position:relative;}
  .category-card:hover {border-color: var(--accent); transform:translateY(-2px); box-shadow:0 8px 16px rgba(6,182,212,0.1);}
  .category-card.needs-attention {border-color: var(--danger); background:#FEF2F2;}
  .help-icon {position:absolute; top:1rem; right:1rem; width:20px; height:20px; background: var(--accent); color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.75rem; cursor:help; font-weight:bold;}
  .help-tooltip {position:absolute; top:2.5rem; right:1rem; background: var(--primary); color:white; padding:0.75rem; border-radius:8px; font-size:0.85rem; width:250px; opacity:0; pointer-events:none; transition:opacity 0.3s ease; z-index:10; line-height:1.4;}
  .help-icon:hover + .help-tooltip {opacity:1;}
  .category-header {display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;}
  .category-name {font-size:1.25rem; font-weight:600; color:var(--primary);}
  .category-score {font-size:1.75rem; font-weight:700; color:var(--accent); min-width:50px; text-align:right;}
  .slider-wrapper {margin-bottom:1rem;}
  input[type="range"] {width:100%; height:8px; border-radius:4px; background:#E5E7EB; outline:none; -webkit-appearance:none; cursor:pointer;}
  input[type="range"]::-webkit-slider-thumb {width:24px; height:24px; background: var(--accent); border-radius:50%; cursor:pointer; transition:all 0.2s ease; box-shadow:0 2px 6px rgba(0,0,0,0.2);}
  input[type="range"]::-webkit-slider-thumb:hover {transform:scale(1.15); background:#0891b2;}
  input[type="range"]::-moz-range-thumb {width:24px; height:24px; background: var(--accent); border-radius:50%; cursor:pointer; border:none; transition:all 0.2s ease; box-shadow:0 2px 6px rgba(0,0,0,0.2);}
  input[type="range"]::-moz-range-thumb:hover {transform:scale(1.15); background:#0891b2;}
  .recommendation {padding:0.75rem; border-radius:8px; font-size:0.95rem; font-weight:500; display:flex; align-items:center; gap:0.5rem; transition:all 0.3s ease;}
  .recommendation.low {background:#FEE2E2; color:#991B1B;}
  .recommendation.medium {background:#FEF3C7; color:#92400E;}
  .recommendation.high {background:#D1FAE5; color:#065F46;}
  .dashboard {background: linear-gradient(135deg, var(--light) 0%, white 100%); padding:2rem; border-radius:12px; text-align:center;}
  .score-display-large {position:relative; width:200px; height:200px; margin:0 auto 2rem;}
  #scoreCircle {width:100%; height:100%; border-radius:50%; background: conic-gradient(var(--accent) 0deg 0deg, #E5E7EB 0deg 360deg); display:flex; flex-direction:column; align-items:center; justify-content:center; transition:all 0.5s ease; box-shadow:0 8px 24px rgba(0,0,0,0.1);}
  #overallScore {font-size:3.5rem; font-weight:700; color:var(--primary);}
  .score-label {font-size:0.9rem; color:#64748B; font-weight:600; text-transform:uppercase; letter-spacing:1px;}
  .status-badge {display:inline-block; padding:0.5rem 1.5rem; border-radius:50px; font-weight:600; font-size:1.1rem; margin-top:1rem;}
  .status-badge.excellent {background:#D1FAE5; color:#065F46;}
  .status-badge.good {background:#DBEAFE; color:#1E40AF;}
  .status-badge.fair {background:#FEF3C7; color:#92400E;}
  .status-badge.needs-work {background:#FEE2E2; color:#991B1B;}
  .action-bar {display:flex; gap:1rem; justify-content:center; flex-wrap:wrap; margin-top:2rem;}
  .btn {padding:0.875rem 2rem; border:none; border-radius:12px; font-weight:700; font-size:1rem; cursor:pointer; transition:all 0.3s ease; display:flex; align-items:center; gap:0.5rem; position:relative; overflow:hidden;}
  .btn::before {content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background:linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); transition:left 0.5s ease;}
  .btn:hover::before {left:100%;}
  .btn-primary {background:linear-gradient(135deg, var(--accent) 0%, #0891b2 100%); color:white; box-shadow:0 4px 12px rgba(6,182,212,0.3);}
  .btn-primary:hover {transform:translateY(-2px); box-shadow:0 6px 16px rgba(6,182,212,0.4);}
  .btn-secondary {background:linear-gradient(135deg, var(--primary) 0%, #334155 100%); color:white; box-shadow:0 4px 12px rgba(30,41,59,0.3);}
  .btn-secondary:hover {transform:translateY(-2px); box-shadow:0 6px 16px rgba(30,41,59,0.4);}
  form {display:flex; flex-direction:column; gap:1rem; margin-top:2rem;}
  input[type="email"], textarea {padding:0.75rem 1rem; border-radius:8px; border:1px solid #CBD5E1; width:100%; font-size:1rem;}
  textarea {resize:vertical; min-height:120px;}
  .success-msg {display:none; padding:0.75rem 1rem; background:#D1FAE5; color:#065F46; border-radius:8px; font-weight:600;}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>Business Scorecard</h1>
    <p>Assess your business health across key operational categories.</p>
  </div>

  <div class="progress-indicator">
    <div class="progress-text">Your Overall Score: <span id="overallScore">0</span></div>
    <div class="quick-actions">
      <button class="quick-btn" id="resetScore">Reset</button>
      <button class="quick-btn" id="downloadPDF">Download PDF</button>
    </div>
  </div>

  <div class="content">
    <div class="section categories" id="categoriesContainer">
      <!-- Categories will be injected by JS -->
    </div>

    <div class="section dashboard">
      <div class="score-display-large">
        <div id="scoreCircle">
          <div id="yourScore">0</div>
          <div class="score-label">Your Score</div>
        </div>
      </div>
      <div class="score-display-large">
        <div id="gapScore">0</div>
        <div class="score-label">Gap to Industry Avg (65)</div>
      </div>
      <div id="statusBadge" class="status-badge fair">Fair Performance</div>
    </div>

    <form id="contactForm" action="https://formspree.io/f/xyzbbyna" method="POST">
      <input type="hidden" name="scores" id="scoresData">
      <input type="email" name="email" placeholder="Your Email" required>
      <textarea name="message" placeholder="Your Message"></textarea>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <form id="emailResultsForm">
      <input type="email" id="emailInput" placeholder="Enter your email to receive results" required>
      <button type="submit" class="btn btn-secondary">Email My Results</button>
      <div id="emailSuccess" class="success-msg">Email sent successfully!</div>
    </form>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
  const categories = [
    {name:'Operations', tooltip:'Your business operations efficiency and processes.'},
    {name:'Sales & Marketing', tooltip:'Effectiveness of your sales and marketing efforts.'},
    {name:'Finance', tooltip:'Financial health and cash flow management.'},
    {name:'Technology', tooltip:'IT systems, tools, and automation level.'},
    {name:'People & Culture', tooltip:'Team engagement, skills, and culture.'}
  ];
  let scores = {};

  function initializeScores(){
    const saved = localStorage.getItem('businessScores');
    categories.forEach((cat,i)=>{
      scores[i] = saved ? JSON.parse(saved)[i] ?? 5 : 5;
    });
  }

  function renderCategories(){
    const container = document.getElementById('categoriesContainer');
    container.innerHTML='';
    categories.forEach((cat,i)=>{
      const card = document.createElement('div');
      card.className='category-card';
      card.innerHTML=`
        <div class="category-header">
          <div class="category-name">${cat.name}</div>
          <div class="category-score" id="score-${i}">${scores[i]}</div>
        </div>
        <div class="slider-wrapper">
          <input type="range" min="0" max="10" value="${scores[i]}" data-cat="${i}" oninput="handleSliderChange(event)">
        </div>
        <div class="recommendation" id="rec-${i}"></div>
        <div class="help-icon" onclick="toggleTooltip(${i})">?</div>
        <div class="help-tooltip" id="tooltip-${i}">${cat.tooltip}</div>
      `;
      container.appendChild(card);
      updateRecommendation(i);
    });
  }

  function handleSliderChange(e){
    const index = e.target.dataset.cat;
    scores[index] = parseInt(e.target.value);
    document.getElementById(`score-${index}`).textContent = scores[index];
    updateRecommendation(index);
    updateOverallScore();
    saveScores();
  }

  function updateRecommendation(index){
    const rec = document.getElementById(`rec-${index}`);
    const score = scores[index];
    if(score <=3) rec.textContent='Critical attention needed', rec.className='recommendation low';
    else if(score <=6) rec.textContent='Room for improvement', rec.className='recommendation medium';
    else rec.textContent='Strong performance', rec.className='recommendation high';
  }

  function updateOverallScore(){
    const total = Object.values(scores).reduce((a,b)=>a+b,0);
    const avg = Math.round(total / categories.length *10);
    document.getElementById('overallScore').textContent=avg;
    document.getElementById('yourScore').textContent=avg;
    const gap=65-avg;
    document.getElementById('gapScore').textContent=gap>0?gap:0;
    const badge = document.getElementById('statusBadge');
    if(avg>=80) badge.textContent='Excellent Performance', badge.className='status-badge excellent';
    else if(avg>=65) badge.textContent='Good Performance', badge.className='status-badge good';
    else if(avg>=40) badge.textContent='Fair Performance', badge.className='status-badge fair';
    else badge.textContent='Needs Work', badge.className='status-badge needs-work';
    document.getElementById('scoreCircle').style.background=`conic-gradient(var(--accent) 0deg ${avg*3.6}deg, #E5E7EB ${avg*3.6}deg 360deg)`;
  }

  function saveScores(){localStorage.setItem('businessScores',JSON.stringify(scores));}

  function toggleTooltip(index){
    const tooltip = document.getElementById(`tooltip-${index}`);
    tooltip.style.opacity=tooltip.style.opacity==='1'?'0':'1';
  }

  document.getElementById('resetScore').addEventListener('click',()=>{
    categories.forEach((_,i)=>scores[i]=5);
    renderCategories();
    updateOverallScore();
    saveScores();
  });

  document.getElementById('downloadPDF').addEventListener('click',async()=>{
    const { jsPDF } = window.jspdf;
    const container=document.querySelector('.container');
    const canvas=await html2canvas(container,{scale:2});
    const imgData=canvas.toDataURL('image/png');
    const pdf=new jsPDF('p','pt','a4');
    const imgProps=pdf.getImageProperties(imgData);
    const pdfWidth=pdf.internal.pageSize.getWidth();
    const pdfHeight=(imgProps.height*pdfWidth)/imgProps.width;
    pdf.addImage(imgData,'PNG',0,0,pdfWidth,pdfHeight);
    pdf.save('Business_Scorecard.pdf');
  });

  const contactForm=document.getElementById('contactForm');
  contactForm.addEventListener('submit',function(){
    document.getElementById('scoresData').value=JSON.stringify(scores);
  });

  const emailForm=document.getElementById('emailResultsForm');
  const emailInput=document.getElementById('emailInput');
  const emailSuccess=document.getElementById('emailSuccess');
  emailForm.addEventListener('submit',function(e){
    e.preventDefault();
    const email=emailInput.value.trim();
    if(!email) return;
    emailSuccess.style.display='block';
    setTimeout(()=>emailSuccess.style.display='none',4000);
    emailForm.reset();
  });

  initializeScores();
  renderCategories();
  updateOverallScore();
</script>
</body>
</html>
